// Generated by HLC 4.2.1 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <util/ServingServer.h>
#include <hl/types/ArrayDyn.h>
#include <haxe/Log.h>
extern haxe__$Log g$_haxe_Log;
extern String s$Hello_World_Hashlink;
extern hl_type t$vrt_329ffa8;
extern String s$util_Server_hx;
extern hl_type t$String;
extern hl_type t$_i32;
extern String s$util_ServingServer;
extern String s$new;
extern hl_type t$vrt_eaa6a3b;
extern hl_type t$util_Server_Hashlink;
void util_Server_Hashlink_new(util__Server_Hashlink);
extern String s$listen;
void util_Server_Hashlink_listen(util__Server_Hashlink);
void util_ServingServer_addPagesToServerRoutes(util__ServingServer,hl__types__ArrayObj);
#include <haxe/iterators/ArrayKeyValueIterator.h>
#include <lib/bases/AbstractPage.h>
extern hl_type t$haxe_iterators_ArrayKeyValueIterator;
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$hl_types_ArrayObj;
void haxe_iterators_ArrayKeyValueIterator_new(haxe__iterators__ArrayKeyValueIterator,hl__types__ArrayDyn);
extern hl_type t$vrt_a8bb192;
extern hl_type t$lib_bases_AbstractPage;
void util_File_WriteFile(String,String);

void util_ServingServer_new(util__ServingServer r0) {
	String r4, r6;
	vvirtual *r5, *r8;
	util__Server_Hashlink r9;
	haxe__$Log r3;
	vclosure *r2;
	int r7;
	r3 = (haxe__$Log)g$_haxe_Log;
	r2 = r3->trace;
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$Hello_World_Hashlink;
	r5 = hl_alloc_virtual(&t$vrt_329ffa8);
	r6 = (String)s$util_Server_hx;
	if( hl_vfields(r5)[1] ) *(String*)(hl_vfields(r5)[1]) = (String)r6; else hl_dyn_setp(r5->value,37969014/*fileName*/,&t$String,r6);
	r7 = 31;
	if( hl_vfields(r5)[2] ) *(int*)(hl_vfields(r5)[2]) = (int)r7; else hl_dyn_seti(r5->value,371360620/*lineNumber*/,&t$_i32,r7);
	r6 = (String)s$util_ServingServer;
	if( hl_vfields(r5)[0] ) *(String*)(hl_vfields(r5)[0]) = (String)r6; else hl_dyn_setp(r5->value,-63073762/*className*/,&t$String,r6);
	r6 = (String)s$new;
	if( hl_vfields(r5)[3] ) *(String*)(hl_vfields(r5)[3]) = (String)r6; else hl_dyn_setp(r5->value,302979532/*methodName*/,&t$String,r6);
	r8 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r5);
	r2->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r2->fun)((vdynamic*)r2->value,((vdynamic*)r4),r8) : ((void (*)(vdynamic*,vvirtual*))r2->fun)(((vdynamic*)r4),r8);
	r9 = (util__Server_Hashlink)hl_alloc_obj(&t$util_Server_Hashlink);
	util_Server_Hashlink_new(r9);
	r0->serverInstance = r9;
	r3 = (haxe__$Log)g$_haxe_Log;
	r2 = r3->trace;
	if( r2 == NULL ) hl_null_access();
	r9 = r0->serverInstance;
	if( r9 == NULL ) hl_null_access();
	r4 = r9->existsing;
	r5 = hl_alloc_virtual(&t$vrt_329ffa8);
	r6 = (String)s$util_Server_hx;
	if( hl_vfields(r5)[1] ) *(String*)(hl_vfields(r5)[1]) = (String)r6; else hl_dyn_setp(r5->value,37969014/*fileName*/,&t$String,r6);
	r7 = 34;
	if( hl_vfields(r5)[2] ) *(int*)(hl_vfields(r5)[2]) = (int)r7; else hl_dyn_seti(r5->value,371360620/*lineNumber*/,&t$_i32,r7);
	r6 = (String)s$util_ServingServer;
	if( hl_vfields(r5)[0] ) *(String*)(hl_vfields(r5)[0]) = (String)r6; else hl_dyn_setp(r5->value,-63073762/*className*/,&t$String,r6);
	r6 = (String)s$new;
	if( hl_vfields(r5)[3] ) *(String*)(hl_vfields(r5)[3]) = (String)r6; else hl_dyn_setp(r5->value,302979532/*methodName*/,&t$String,r6);
	r8 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r5);
	r2->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r2->fun)((vdynamic*)r2->value,((vdynamic*)r4),r8) : ((void (*)(vdynamic*,vvirtual*))r2->fun)(((vdynamic*)r4),r8);
	return;
}

void util_ServingServer_listen(util__ServingServer r0,int r1,vclosure* r2) {
	String r6, r9;
	vvirtual *r8, *r11;
	util__Server_Hashlink r7;
	haxe__$Log r5;
	vclosure *r4;
	int r10;
	r5 = (haxe__$Log)g$_haxe_Log;
	r4 = r5->trace;
	if( r4 == NULL ) hl_null_access();
	r7 = r0->serverInstance;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->existsing;
	r8 = hl_alloc_virtual(&t$vrt_329ffa8);
	r9 = (String)s$util_Server_hx;
	if( hl_vfields(r8)[1] ) *(String*)(hl_vfields(r8)[1]) = (String)r9; else hl_dyn_setp(r8->value,37969014/*fileName*/,&t$String,r9);
	r10 = 46;
	if( hl_vfields(r8)[2] ) *(int*)(hl_vfields(r8)[2]) = (int)r10; else hl_dyn_seti(r8->value,371360620/*lineNumber*/,&t$_i32,r10);
	r9 = (String)s$util_ServingServer;
	if( hl_vfields(r8)[0] ) *(String*)(hl_vfields(r8)[0]) = (String)r9; else hl_dyn_setp(r8->value,-63073762/*className*/,&t$String,r9);
	r9 = (String)s$listen;
	if( hl_vfields(r8)[3] ) *(String*)(hl_vfields(r8)[3]) = (String)r9; else hl_dyn_setp(r8->value,302979532/*methodName*/,&t$String,r9);
	r11 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r8);
	r4->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r4->fun)((vdynamic*)r4->value,((vdynamic*)r6),r11) : ((void (*)(vdynamic*,vvirtual*))r4->fun)(((vdynamic*)r6),r11);
	r7 = r0->serverInstance;
	if( r7 == NULL ) hl_null_access();
	util_Server_Hashlink_listen(r7);
	return;
}

void util_ServingServer_autoRegisterPages(util__ServingServer r0,hl__types__ArrayObj r1) {
	r0->Pages = r1;
	util_ServingServer_addPagesToServerRoutes(r0,r1);
	return;
}

void util_ServingServer_addPagesToServerRoutes(util__ServingServer r0,hl__types__ArrayObj r1) {
	vvirtual *r6, *r7;
	bool r5;
	haxe__iterators__ArrayKeyValueIterator r2;
	hl__types__ArrayDyn r3;
	lib__bases__AbstractPage r9;
	int r8;
	r2 = (haxe__iterators__ArrayKeyValueIterator)hl_alloc_obj(&t$haxe_iterators_ArrayKeyValueIterator);
	r3 = (hl__types__ArrayDyn)hl_dyn_castp(&r1,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayKeyValueIterator_new(r2,r3);
	label$79acfad_4_3:
	if( r2 == NULL ) hl_null_access();
	r5 = ((bool (*)(haxe__iterators__ArrayKeyValueIterator))r2->$type->vobj_proto[0])(r2);
	if( !r5 ) goto label$79acfad_4_13;
	r6 = ((vvirtual* (*)(haxe__iterators__ArrayKeyValueIterator))r2->$type->vobj_proto[1])(r2);
	r7 = hl_to_virtual(&t$vrt_a8bb192,(vdynamic*)r6);
	if( r7 == NULL ) hl_null_access();
	r8 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,5343647/*key*/,&t$_i32);
	r9 = hl_vfields(r7)[1] ? (*(lib__bases__AbstractPage*)(hl_vfields(r7)[1])) : (lib__bases__AbstractPage)hl_dyn_getp(r7->value,297304054/*value*/,&t$lib_bases_AbstractPage);
	goto label$79acfad_4_3;
	label$79acfad_4_13:
	return;
}

void util_ServingServer_serve(util__ServingServer r0,String r1,String r2,vclosure* r3) {
	return;
}

void util_ServingServer_generateFiles(util__ServingServer r0) {
	String r10, r11, r12;
	vvirtual *r6, *r7;
	hl__types__ArrayObj r2;
	bool r5;
	haxe__iterators__ArrayKeyValueIterator r1;
	hl__types__ArrayDyn r3;
	lib__bases__AbstractPage r9;
	int r8;
	r1 = (haxe__iterators__ArrayKeyValueIterator)hl_alloc_obj(&t$haxe_iterators_ArrayKeyValueIterator);
	r2 = r0->Pages;
	r3 = (hl__types__ArrayDyn)hl_dyn_castp(&r2,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayKeyValueIterator_new(r1,r3);
	label$79acfad_6_4:
	if( r1 == NULL ) hl_null_access();
	r5 = ((bool (*)(haxe__iterators__ArrayKeyValueIterator))r1->$type->vobj_proto[0])(r1);
	if( !r5 ) goto label$79acfad_6_21;
	r6 = ((vvirtual* (*)(haxe__iterators__ArrayKeyValueIterator))r1->$type->vobj_proto[1])(r1);
	r7 = hl_to_virtual(&t$vrt_a8bb192,(vdynamic*)r6);
	if( r7 == NULL ) hl_null_access();
	r8 = hl_vfields(r7)[0] ? (*(int*)(hl_vfields(r7)[0])) : (int)hl_dyn_geti(r7->value,5343647/*key*/,&t$_i32);
	r9 = hl_vfields(r7)[1] ? (*(lib__bases__AbstractPage*)(hl_vfields(r7)[1])) : (lib__bases__AbstractPage)hl_dyn_getp(r7->value,297304054/*value*/,&t$lib_bases_AbstractPage);
	if( r9 == NULL ) hl_null_access();
	r10 = r9->OverrideFilePath;
	if( r10 ) goto label$79acfad_6_18;
	r11 = r9->Path;
	r10 = r11;
	label$79acfad_6_18:
	r12 = ((String (*)(lib__bases__AbstractPage))r9->$type->vobj_proto[0])(r9);
	util_File_WriteFile(r10,r12);
	goto label$79acfad_6_4;
	label$79acfad_6_21:
	return;
}

